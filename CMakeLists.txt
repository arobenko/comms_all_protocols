cmake_minimum_required (VERSION 2.8.11)
project ("comms_all_protocols" NONE)

include (ExternalProject)

set (COMMON_BRANCH "develop")

set (COMMS_CHAMPION_PROJ "comms_champion")
set (COMMS_CHAMPION_DIR "${CMAKE_BINARY_DIR}/${COMMS_CHAMPION_PROJ}")
set (COMMS_CHAMPION_SRC_DIR "${COMMS_CHAMPION_DIR}/src")
set (COMMS_CHAMPION_BIN_DIR "${COMMS_CHAMPION_DIR}/build")
set (COMMS_CHAMPION_INSTALL_DIR "${COMMS_CHAMPION_BIN_DIR}/install")

ExternalProject_Add(
    "${COMMS_CHAMPION_PROJ}"
    PREFIX "${COMMS_CHAMPION_BUILD_DIR}"
    STAMP_DIR "${COMMS_CHAMPION_BUILD_DIR}"    
    GIT_REPOSITORY "https://github.com/arobenko/comms_champion.git"
    GIT_TAG "${COMMON_BRANCH}"
    SOURCE_DIR "${COMMS_CHAMPION_SRC_DIR}"
    CMAKE_ARGS -DCC_COMMS_UNIT_TESTS=ON -DCC_COMMS_CHAMPION_DEMO=ON
    BINARY_DIR "${COMMS_CHAMPION_BIN_DIR}"
    INSTALL_DIR "${COMMS_CHAMPION_INSTALL_DIR}"
    TEST_BEFORE_INSTALL 1
)
